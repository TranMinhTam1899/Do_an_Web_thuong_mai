<script type="text/javascript">
	
	// alert(window.location.href);
	
	if(window.location.href.indexOf("publicquestionportlet") == -1) {
		window.location.href = "${addQuestionRender}";
	}
	
	$(document).ready(function(){
		
		$('.tab-question a').click(function(){			
			window.location.href = $(this).attr('href');
		});		
	});
	
</script>




<!-- Chi tiết hỏi đáp -->
<div id="ChiTietHoiDap">		
    <div class="qa_title">	
	    <h4>HỎI ĐÁP</h4>     
	</div>
	
	<div class="main_content container">
		
		<#if action_template == "VIEW_DETAIL">
			
			<div class="info_content"></div>
			
            <section class="info_opinion">
                <div class="info_title">
                    <h3>THÔNG TIN Ý KIẾN</h3>
                    <b class="bar"></b>
                </div>
                <div class="info_item">
                    <form action="#">
                        <div class="row my-2">
                            <div class="col-sm-3">
                                <label class="control-label">Họ và tên</label>
                            </div>
                            <div class="col-sm-9">
                                <label class=" control-label">${question.sendername}</label>
                            </div>
                        </div>
                        <div class="row my-2">
                            <div class="col-sm-3">
                                <label class="control-label">Tiêu Đề</label>
                            </div>
                            <div class="col-sm-9">
                                <label class="control-label">${question.questiontitle}</label>
                            </div>
                        </div>
                        <div class="row my-2">
                            <div class="col-sm-3">
                                <label class="control-label">Địa chỉ</label>
                            </div>
                            <div class="col-sm-9">
                                <span>${question.senderaddress}</span>
                            </div>
                        </div>
                        <div class="row my-2">
                            <div class="col-sm-3">
                                <label class="control-label">Nội dung</label>
                            </div>
                            <div class="col-sm-9">
                                <span>${question.questioncontent}</span>
                            </div>
                        </div>
                    </form>
                </div>
            </section>
			
            <section class="info_opinion">
                <div class="info_title">
                    <h3>THÔNG TIN PHẢN HỒI</h3>
                    <b class="bar"></b>
                </div>
                <div class="info_item">
                    <form action="#">
                        <div class="row my-2">
                            <div class="col-sm-3">
                                <label class="control-label">Đơn vị xử lý</label>
                            </div>
                            <div class="col-sm-9">
                                <label class="control-label">${question.domainname}</label>
                            </div>
                        </div>
                        <div class="row my-2">
                            <div class="col-sm-3">
                                <label class="control-label">Lĩnh vực hỏi đáp</label>
                            </div>
                            <div class="col-sm-9">
                                <span>${question.questionfield}</span>
                            </div>
                        </div>
                        <div class="row my-2">
                            <div class="col-sm-3">
                                <label class="control-label">Nội dung trả lời</label>
                            </div>
                            <div class="col-sm-9">
                                ${question.answercontent}
                            </div>
                        </div>
                    </form>
                </div>
			
            </section>
			
            <a href="javascript:history.back();" class="btn  btn_return">Quay lại</a>
        </div>
		</#if>
		
		
		
		<#if action_template != "VIEW_DETAIL">
		
        <div class="reps_title">
            <h4>Quý bạn đọc thân mến!</h4>
        </div>
		
        <section class="reps_content">
            <div class="reps_text">
                <p>Để thuận tiện cho việc chuyển thư tới các cơ quan chức năng xem xét, giải quyết nội dung ý kiến góp ý đảm bảo thông tin góp ý là chính xác. Trang thông tin điện tử Trung tâm Công nghệ Thông tin và Truyền thông Quảng Bình đề nghị bạn đọc:</p>
                <p>- Điền đầy đủ và chính xác các thông tin cá nhân (tên, địa chỉ,email, điện thoại?)và cả phần dưới theo mẫu hướng dẫn. Đó là những thông tin bắt buộc mà bạn đọc cần phải điền.</p>
                <p>
                    - Nội dung ý kiến góp ý cũng như các thông tin cá nhấn phải sử dụng tiếng việt có dấu.</p>
                <p>- Các ý kiến góp ý gửi tới Trang thông tin điện tử Trung tâm Công nghệ Thông tin và Truyền thông Quảng Bình, bạn đọc nên viết rõ ràng mạch lạc. Khi góp ý một vấn đề phải nêu rõ vấn đề, tình hình hoặc trình bày rõ sự việc vướng mắc cần phải giải đáp, giải quyết.</p>
                <p>Tất cả thư không đáp ứng được các yêu cầu nêu trên sẽ không được Trang thông tin điện tử Trung tâm Công nghệ Thông tin và Truyền thông Quảng Bình phục vụ. Những thư hợp lệ trong vòng 24h sẽ được Trang thông tin điện tử Trung tâm Công nghệ Thông tin và Truyền thông Quảng Bình chuyển tới các cơ quan chức năng có thẩm quyền để xem xét, giải quyết và có phản hồi trong thời gian sớm nhất. Nội dung phản hồi được gửi đến hộp thư điện tử của quý bạn đọc hoặc đăng trên Trang thông tin điện tử Trung tâm Công nghệ Thông tin và Truyền thông Quảng Bình .</p>

                <p>Quý bạn đọc có thể góp ý trược tiếp về các lĩnh vực với người có thẩm quyền, vui lòng  <a  href="http://www2.quangbinh.gov.vn/email" target="_blank">nhấn vào đây</a> để xem số điện thoại hay hộp thư điện tử của lãnh đạo các đơn vị.</p>
					
				<p>	Xin chân thành cảm ơn sự tin cây và hợp tác của quý bạn đọc</p>
            </div>
        </section>
		
		
        <section class="box_center">
			
			
            <nav>
                <div class="nav nav-tabs tab-question" id="nav-tab" role="tablist">
					
					<#if action_template == "ADD">
						<a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="${addQuestionRender}" role="tab" 
							aria-controls="nav-home" aria-selected="true">Phản ánh kiến nghị</a>
						<a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="${viewListQuestion}" role="tab"
							aria-controls="nav-profile" aria-selected="false">Kết quả xử lý</a>
					</#if>
					
					<#if action_template == "VIEW">
						<a class="nav-item nav-link" id="nav-home-tab" data-toggle="tab" href="${addQuestionRender}" role="tab" 
							aria-controls="nav-home" aria-selected="false">Phản ánh kiến nghị</a>
						<a class="nav-item nav-link active" id="nav-profile-tab" data-toggle="tab" href="${viewListQuestion}" role="tab"
							aria-controls="nav-profile" aria-selected="true">Kết quả xử lý</a>
					</#if>
					
                </div>
            </nav>
			
			
            <div class="tab-content" id="nav-tabContent">
				
				<#if action_template == "ADD">
                <div class="tab-pane fade show active" id="ref_content" role="tabpanel" aria-labelledby="nav-home-tab">
					
					<div class="errors">
						${erros}
					</div>
					
					<div class="title_page_list">
						Gửi câu hỏi
					</div>
					
		
					<#escape x as x?html>
					<form id="frm_content" method="post" action="${addQuestionAction}" class="needs-validation" novalidate>
						
						<div class="form-group row">
							<label for="#" class="col-sm-2">Vấn đề bạn hỏi <font>(*)</font></label>
							
							<div class="col-sm-4">
								<input type="text" class="form-control" name="questiontitle" id="questiontitle" value="${questiontitle}"
									placeholder="Vấn đề bạn hỏi..." required />
								
								<div class="invalid-feedback">
									Bạn vui lòng nhập vấn đề cần hòi.
								</div>
							</div>
						</div>
						
                        <div class="form-group row ">
							<label for="#" class="col-sm-2">Tên người gửi <font>(*)</font></label>
							
							<div class="col-sm-4">
								<input type="text" class="form-control" name="sendername" id="sendername" value="${sendername}"
									placeholder="Nhận tên người gửi..." required />
								
								<div class="invalid-feedback">
									Bạn vui lòng nhập tên người gửi
								</div>
							</div>
							
							<label for="#" class="col-sm-2">Đối tượng </label>
							<select name="senderobject" id="senderobject" class="form-control col-sm-4 chosen-select">						
								<option value="1" <#if senderobject == 1>selected="selected"</#if>>Công dân</option>
								<option value="2" <#if senderobject == 2>selected="selected"</#if>>Doanh nghiệp</option>
							</select>
						</div>
						
                        <div class="form-group row">
							<label for="#" class="col-sm-2" class="col-sm-2">Điện thoại</label>
							
							<div class="col-sm-10">
								<input type="phone" class="form-control" name="sendertelephone" id="sendertelephone" value="${sendertelephone}" 
									placeholder="Nhập số điện thoại...." maxlength="15" />
							</div>
						</div>
						
                        <div class="form-group row">
							<label for="#" class="col-sm-2">Thư điện tử </label>
							
							<div class="col-sm-4">
								<input type="email" class="form-control" name="senderemail" id="senderemail" value="${senderemail}" 
									placeholder="Nhập thư điện tử" />
								
								<div class="invalid-feedback">
									Email không hợp lệ
								</div>
							</div>
							
							<div class="col-sm-6 pt-3">
								<input type="checkbox" id="receiptbyemail" name="receiptbyemail" value="1" <#if receiptbyemail == 1>checked="checked"</#if> />
								<label for="receiptbyemail">
									Nhận trả lời qua thư điện tử
								</label>
							</div>
						</div>
						
                        <div class="form-group row">
							<label for="#" class="col-sm-2">Địa chỉ <font>(*)</font></label>
							
							<div class="col-sm-10">
								<input type="text" class="form-control col-sm-10" name="senderaddress" id="senderaddress" value="${senderaddress}"
									placeholder="Nhập địa chỉ" required />
								
								<div class="invalid-feedback">
									Bạn vui lòng nhập địa chỉ
								</div>
							</div>
							
						</div>
						
                        <div class="form-group row">
							<label for="#" class="col-sm-2">Nội dung phản ánh, kiến nghị <font>(*)</font></label>
							
							<div class="col-sm-10">
								<textarea class="form-control" name="questioncontent" id="questioncontent" cols="30" rows="10"
									placeholder="Nội dung phản ánh...." required>${questioncontent}</textarea>
								
								<div class="invalid-feedback">
									Bạn vui lòng nhập nội dung phản ánh, kiến nghị
								</div>
							</div>
						</div>
													
						<div class="form-group row">
							<label for="#" class="col-sm-2">Giải pháp đề xuất (Nếu có)</label>
							
							<div class="col-sm-10">
								<textarea class="form-control" name="solutions" id="solutions" cols="30" rows="10"
									placeholder="Nội dung đề xuất....">${solutions}</textarea>
							</div>
						</div>
						
                        <div class="form-group row">
							<label for="#" class="col-sm-2">Lĩnh vực </label>
							
							<div class="col-sm-10">
								
								<select id="questionfieldid" name="questionfieldid" class="form-control chosen-select">
										<option value="0">---Chọn---</option>
										<#list questionfields as questionfield>
											<option orgId="${questionfield.organizationid}"
												value="${questionfield.questionfieldid}">${questionfield.name}</option>
										</#list>
								</select>
								
								<select id="questionfieldid_temp" name="questionfieldid_temp" style="visibility: hidden;" class="form-control chosen-select"></select>
							</div>
						</div>
						
                        <div class="form-group row">
							
							<!--
                            <label for="#" class="col-sm-2">Mã bảo mật</label>
                            <div class="col-sm-10 pass_sec">
                                <input type="text" name="" class="form-control" id="security">
                                <span class="sec_images">
                                    <img src="./images/verify.png" alt="" style="height: 36px;">
                                </span>
                                <a href="#">
                                    <i class="fa fa-sync-alt fa-2x text-success"></i>
                                </a>
							-->														
							
							<div id="d-capcha" class="col-sm-2"></div>
							
							<div class="col-sm-10 pass_sec" id="imgCapcha"></div>
							
						</div>
						
                        <div class=" row">
                            <label class="col-sm-2"></label>
                            <div class="col-sm-10">
                                <button type="submit" class="btn btn-primary">Gửi góp ý</button>
                            </div>
                        </div>
					
                    </form>
					</#escape>
                </div>
				</#if>
				
				
				
				
				
				<#if action_template == "VIEW">
                <div class="tab-pane fade show active" id="res_content" role="tabpanel" aria-labelledby="nav-profile-tab">
					
					<div>
						<div class="success">
							${success}
						</div>
						<div class="errors">
							${erros}
						</div>
					</div>					
					
					
                    <div class="retur_main">
						<form method="post" action="${viewListQuestion}" id="lstCauhoi">
							
							<input type="hidden" name="cmd" value="VIEW" />
							<input type="hidden" name="organizationid" value="${organizationid}" />
							<input type="hidden" name="senderobject" value="${senderobject}" />
							
							<section class="retur row ">
								<div class="col-sm-3 mb-2">
									<select id="questionfieldid" name="questionfieldid" class="form-control chosen-select">
										<option value="-1">---Chọn---</option>
										<#list questionfields as questionfield>
											<#if questionfield.questionfieldid == questionfieldid>
												<option value="${questionfield.questionfieldid}" selected="selected">${questionfield.name}</option>
											<#else>
												<option value="${questionfield.questionfieldid}">${questionfield.name}</option>
											</#if>
										</#list>
									</select>
								</div>
								<div class="col-sm-9">
									<#escape x as x?html>
									<form action="#" class="frm_search">									
										<input type="text" placeholder="Nội dung cần tìm..." class="input-block-level" name="keywords" id="keywords" value="${keywords}" />
										<button class="btn btn-primary" type="submit">Tìm kiếm</div>
									</form>
									</#escape>
								</div>
							</section>
						</form>
						
						<#escape x as x?html>
                        <section class="retur_content mt-3">
                            <table class="table table-striped">
                                <thead>
									
									<#if questions?size != 0>
									  <tr>
										<th scope="col">STT</th>
										<th scope="col">Người gửi</th>
										<th scope="col">Ngày gửi</th>
										<th scope="col">Vấn đề cần hỏi</th>
										<th scope="col">Ngày trả lời</th>
									  </tr>
									</#if>
									
                                </thead>
                                <tbody>
									
									<#list questions as question>
										<tr>
											<th scope="row">${question_index + 1}</th>
											<td>${question.sendername}</td>
											<td>${freemakerUtil.formatDate(question.questiondate, "dd/MM/yyyy")}</td>
											<td>
												<a href="${viewQuestionDetail}&questionid=${question.questionid}">${question.questiontitle}</a>
											</td>
											<td>${freemakerUtil.formatDate(question.answerdate, "dd/MM/yyyy")}</td>
										</tr>
									</#list>
									
                                </tbody>
                              </table>
                        </section>
						</#escape>
						
						<div class="row">
							
							<div class="col-sm-3">
								<!--
								<button class="btn btn-primary" style="padding: 6px 20px;"><a style="color: #fff;" href="${addQuestionRender}">Gửi câu hỏi</a></button>
								-->				
							</div>
							
							<div class="col-sm-9" style="text-align: right;">
								<div>Có ${size} kết quả được tìm thấy</div>
								<div>${freemakerUtil.googlePagePortlet(viewListQuestionPaging, pageHolder)}</div>
							</div>
						</div>
						
				</div>
				</#if>
			
			</div>
			
			
			
        </section>
		</#if>
		
	</div>
</div>
	
	




<script type="text/javascript">
	
	$(document).ready(function(){			
		
		$("#inputCapcha").append($("#d-capcha div.taglib-captcha div.control-group.input-text-wrapper"));
		
		$("#imgCapcha").append($("#dt-capcha"));
		
		$(".taglib-captcha input.field").prop('required',true);
		
		$(".taglib-captcha input.field").after($("<div class='invalid-feedback'>Bạn vui lòng nhập mã bảo mật</div>"));				
		
		
		// Fetch all the forms we want to apply custom Bootstrap validation styles to
		var forms = document.getElementsByClassName('needs-validation');
		
		// Loop over them and prevent submission
		var validation = Array.prototype.filter.call(forms, function(form) {
		
		  form.addEventListener('submit', function(event) {
			
			if (form.checkValidity() === false) {
			  event.preventDefault();
			  event.stopPropagation();
			}
			
			form.classList.add('was-validated');
		  }, false);
		});
		
	});
	
</script>